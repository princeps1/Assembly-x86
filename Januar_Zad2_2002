.386
.model flat,c

.data

	MAT dd 1,3,7,5,8,1,4,9,-3
	N dd 3
	NIZ dd ?

.stack 4096
.code
	MAX proc
		;//OVDE CE DA BUDE CUVANJE KONTEKSTA PROCESORA
		push ebp
		mov ebp,esp

		PUSH ECX
		PUSH EBX
		PUSH EAX
		PUSH ESI



		mov ecx,[ebp+12];//BROJ ELEMENATA VRSTE U ECX
		mov ebx, [ebp + 16];//ADRESA VRSTE MATRICE
		mov eax, [ebx];//VREDNOST PRVOG ELEMENTA VRSTE U EAX,...
		;//...TU CE NA KRAJU DA SE SMESTI VREDNOST NAJVECEG ELEMENTA

		PETLJA:
		cmp eax, [ebx];//UPOREDJIVANJE TRENUTNOG NAJVECEG I SLEDECEG ELEMENTA
		jg VECI
			mov eax, [ebx];//AKO JE EAX MANJI,VREDNOST IZ[EBX] PREBACI U EAX

		VECI:
		add ebx, 4

		loop PETLJA

		mov esi, [ebp + 8];//IZ STEKA VADIM ADRESU NIZA
		mov[esi], eax;//NA ADRESU NIZA STAVLJAM VREDNOST NJEGOVOG ELEMENTA
		

		POP ESI
		POP EAX
		POP EBX
		POP ECX
		POP EBP

		ret 12

	MAX endp
	


	main proc
			mov ecx,N;//OVOLIKO CE PETLJA DA SE VRTI
			mov ebx,0
			lea esi,MAT[ebx];//U ESI CE BITI ADRESA PRVOG ELEMENTA VRSTE
			lea edi, NIZ;//U EDI CE BITI ADRESA NIZA
			PETLJA:

				PUSH esi;//NA STEK STAVLJAM ADRESU PRVOG ELEMENTA VRSTE
				PUSH N;//STAVLJAM NA STEK VREDNOST BROJA ELEMENATA
				PUSH edi;//STAVLJAM NA STEK ADRESU NIZA
				call MAX;//POZIVANJE PROCEDURE
				add esi,12
				add edi,4


			loop PETLJA

	main endp
	end main
